<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
	<meta charset="utf-8" />
</head>
<body>

    <script>
        function repeatFunction(fn)
        {
            var object = {
                state: '',
                resolve: function () {
                    this.state = 'Resolved';
                }
            };
            var resolve = object.resolve.bind(object);
            return function () {
                if (object.state == "Pending") {
                    return;
                }
                object.state = "Pending";
                fn.apply(this, [resolve,...arguments]);
            }
        }

        var aa = repeatFunction(function (resolve) {
            console.log('aaaaaaaaaaa');
            setTimeout(function () {
                resolve();
            },5000);
        });
    </script>
</body>
</html>
